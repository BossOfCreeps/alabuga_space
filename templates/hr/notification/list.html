{% extends "hr/base.html" %}
{% load tz %}
{% load django_bootstrap5 %}
{% block title %}Список уведомлений{% endblock %}
{% block content %}
    <div class="container">
        <table class="table table-bordered" id="example">
            <thead>
                <tr>
                    <th>Пользователь</th>
                    <th>Текст</th>
                    <th>Дата создания</th>
                    <th>Прочитано</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody>
                {% for notif in object_list %}
                    <tr>
                        <td>{{ notif.user }}</td>
                        <td>{{ notif.text }}</td>
                        <td>{{ notif.created_at|localtime }}</td>
                        <td>{{ notif.is_read|yesno:"Да,Нет" }}</td>
                        <td>
                            {% if not notif.is_read %}
                                <a href="{% url 'notifications-check' notif.id %}"
                                   class="btn btn-secondary">
                                    <i class="fa fa-check"></i>
                                </a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
{% block scripts %}
    <script>
            $(document).ready(function() {
                new DataTable('#example', {
                    responsive: true,
                    language: {url: 'https://cdn.datatables.net/plug-ins/2.3.4/i18n/ru.json',},
                    columnDefs: [
                        {
                            responsivePriority: 1,
                            targets: [0, 1, 4]
                        },
                        {
                            responsivePriority: 100,
                            targets: [2, 3]
                        },
                        {
                            targets: [0,1,2,3],
                            columnControl: {
                                target: 0,
                                className: 'dtcc-row_no-bottom-border',
                                content: [['orderAsc', 'orderDesc', 'spacer', 'searchList']]
                            }
                        },
                        { width: '60px', targets: -1 }
                    ],
                    ordering: false,
                    paging: false,
                    searching: false,
                    info: false,
                });
        });
    </script>
{% endblock %}
