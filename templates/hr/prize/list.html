{% extends "hr/base.html" %}
{% load django_bootstrap5 %}
{% block title %}Список артефактов{% endblock %}
{% block content %}
    <div class="container">
        <a href="{% url 'prize-create' %}">
            <button class="btn btn-success">
                <i class="fa fa-add"></i>
                Добавить артефакт
            </button>
        </a>
        <table class="table table-bordered" id="example">
            <thead>
                <tr>
                    <th>Название</th>
                    <th>Редкость</th>
                    <th>Цена</th>
                    <th>Необходимо уведомить HR о получении</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody>
                {% for prize in object_list %}
                    <tr>
                        <td>{{ prize.name }}</td>
                        <td>{{ prize.rare }}</td>
                        <td>
                            {% if prize.is_buying %}
                                {{ prize.price }}
                            {% else %}
                                Не продаётся
                            {% endif %}
                        </td>
                        <td>
                            {% if rize.need_hr_notif %}
                                Да
                            {% else %}
                                Нет
                            {% endif %}
                        </td>
                        <td>
                            <a href="{% url 'prize-update' prize.id %}" class="btn btn-secondary">
                                <i class="fa fa-pencil"></i>
                            </a>
                            <a href="{% url 'prize-delete' prize.id %}" class="btn btn-danger">
                                <i class="fa fa-trash"></i>
                            </a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
{% block scripts %}
    <script>
            $(document).ready(function() {
                new DataTable('#example', {
                    responsive: true,
                    language: {url: 'https://cdn.datatables.net/plug-ins/2.3.4/i18n/ru.json',},
                    columnDefs: [
                        {
                            responsivePriority: 1,
                            targets: [0, 4]
                        },
                        {
                            responsivePriority: 100,
                            targets: [1, 2, 3]
                        },
                        {
                            targets: [0,1,2,3],
                            columnControl: {
                                target: 0,
                                className: 'dtcc-row_no-bottom-border',
                                content: [['orderAsc', 'orderDesc', 'spacer', 'searchList']]
                            }
                        },
                        { width: '114px', targets: -1 }
                    ],
                    ordering: false,
                    paging: false,
                    searching: false,
                    info: false,
                });
        });
    </script>
{% endblock %}
